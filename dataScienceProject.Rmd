---
title: "dataScienceFinal"
author: "Alex Son and Becca Storey"
date: "11/27/2018"
output: pdf_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(httr)
library(tidyverse)
```

```{r}
  # r <- GET("http://httpbin.org/get", 
  # query = list(key1 = "value1", key2 = "value2")
  
  yelp <- GET("https://api.yelp.com/v3/businesses/search?location=New York City&price=1,2,3,4&limit=10", add_headers(Authorization = "Bearer xEc4HGvGXUa5hzIiVTxBlbkfHRogq_QZRiIwbmEyo5MROFTISNg2zDn60UnEADRJA8hU4KMbkzfCIrgh2p6C9RvAJouRwxnrFf_NHtlYjFuUjPXla9vsJNb3hTvrW3Yx"))

test <- GET("https://api.yelp.com/v3/businesses/search?location=New York City&price=1,2,3,4&limit=10", add_headers(Authorization = "Bearer xEc4HGvGXUa5hzIiVTxBlbkfHRogq_QZRiIwbmEyo5MROFTISNg2zDn60UnEADRJA8hU4KMbkzfCIrgh2p6C9RvAJouRwxnrFf_NHtlYjFuUjPXla9vsJNb3hTvrW3Yx"))

  details <- content(test, "parse")
  
  details$businesses[[1]]
  
  for(i in details$businesses){
    print(i$name)
    print(i$rating)
    print(i$coordinates$latitude)
    print(i$coordinates$longitude)
    print(i$price)
  }
  
  yelp_test_table <- tibble( Name = character(), Rating = double(), latitude = double(), longitude = double(), price = character(), review_count = integer(), categories = character())
  
  length(details$businesses)
  
  for(i in 1:length(details$businesses)){
    yelp_test_table[i,1] <- details$businesses[[i]]$name
    yelp_test_table[i,2] <- details$businesses[[i]]$rating
    yelp_test_table[i,3] <- details$businesses[[i]]$coordinates$latitude
    yelp_test_table[i,4] <- details$businesses[[i]]$coordinates$longitude
    yelp_test_table[i,5] <- details$businesses[[i]]$price
    yelp_test_table[i,6] <- details$businesses[[i]]$review_count 
  }
  
  yelp_test_table
```

